[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

; Serial Monitor
monitor_speed = 115200
monitor_filters = 
    colorize
    esp32_exception_decoder

; Upload settings
upload_speed = 921600
upload_port = /dev/cu.usbserial-*  ; Auto-detect USB port (macOS)

; Build settings
build_flags = 
    -D FIRMWARE_VERSION='"3.1.0"'
    -D FIRMWARE_BUILD_DATE='"${UNIX_TIME}"'
    -D LED_COUNT=115
    -D LED_PIN=13
    -D CORE_DEBUG_LEVEL=3  ; Verbose debug output
    -D CONFIG_ARDUHAL_LOG_COLORS=1

; Library Dependency Finder - use default to auto-detect framework libraries
lib_ldf_mode = deep

; Library dependencies
lib_deps = 
    ; Project libraries
    fastled/FastLED@^3.6.0
    bblanchon/ArduinoJson@^7.0.4
    
    ; ezTime for timezone/NTP
    ropg/ezTime@^0.8.3
    
    ; ESPAsyncWebServer (use me-no-dev's version - widely used)
    https://github.com/me-no-dev/ESPAsyncWebServer.git
    https://github.com/me-no-dev/AsyncTCP.git

; OTA settings
upload_protocol = esptool
upload_flags = 
    --before=default_reset
    --after=hard_reset

; Filesystem settings (if using SPIFFS/LittleFS later)
board_build.filesystem = littlefs
board_build.partitions = default.csv

; Extra scripts (optional - for custom build steps)
; extra_scripts = 
;     pre:scripts/build_frontend.py
